
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="fast serialization, deserialization and validation using reflection.">
      
      
      
        <link rel="canonical" href="https://docs.reflect-cpp.dev/concepts/custom_classes/">
      
      
        <link rel="prev" href="../structs/">
      
      
        <link rel="next" href="../field_syntax/">
      
      
        
      
      
      <link rel="icon" href="../../banner2.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39+insiders-4.53.14">
    
    
      
        <title>Custom Classes - Reflect-cpp</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fd1ad6e4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-an-impl-struct" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Reflect-cpp" class="md-header__button md-logo" aria-label="Reflect-cpp" data-md-component="logo">
      
  <img src="../../reflect-cpp-head.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Reflect-cpp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Custom Classes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-purple"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/getml/reflect-cpp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    getml/reflect-cpp
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../structs/" class="md-tabs__link">
          
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../supported_formats/bson/" class="md-tabs__link">
          
  
  Supported Formats

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../reflective_programming/" class="md-tabs__link">
        
  
    
  
  Reflective Programming

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Reflect-cpp" class="md-nav__button md-logo" aria-label="Reflect-cpp" data-md-component="logo">
      
  <img src="../../reflect-cpp-head.png" alt="logo">

    </a>
    Reflect-cpp
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/getml/reflect-cpp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    getml/reflect-cpp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Welcome to Reflect-cpp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Why use Reflect-cpp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../structs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Structs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    Custom Classes
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    Custom Classes
  

    
  </span>
  
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-an-impl-struct" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using an Impl struct
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-variables-the-safe-way" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matching variables, the safe way
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-variables-the-unsafe-way" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matching variables, the unsafe way
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom parsers
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../field_syntax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Fields
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Type
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Processors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Serialization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Validators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Errors handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Supported Formats
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Supported Formats
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/bson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    BSON
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/cbor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    CBOR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/flexbuffers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    FlexBuffers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    JSON
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    JSON Schema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/msgpack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    MessagePack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/toml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    TOML
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/xml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    XML
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/yaml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    YAML
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supported_formats/supporting_your_own_format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Custom Format
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reflective_programming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Reflective Programming
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-an-impl-struct" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using an Impl struct
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-variables-the-safe-way" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matching variables, the safe way
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-variables-the-unsafe-way" class="md-nav__link">
    <span class="md-ellipsis">
      
        Matching variables, the unsafe way
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom parsers
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                




              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Custom Classes</h1>

<p>Reflection implies that all your fields are public. But in object-oriented programming, you often don't want
that. If your class is more than a trivial, behaviorless struct, you often want to make your fields private.</p>
<p>If you want your class to be supported by reflect-cpp, it needs to have the following:</p>
<ol>
<li>It needs to publicly define a type called <code>ReflectionType</code> using <code>using</code> or <code>typedef</code>.</li>
<li>It needs to have a constructor that accepts your <code>ReflectionType</code> as an argument.</li>
<li>It needs to contain a method called <code>reflection</code> that returns said <code>ReflectionType</code> (or a reference thereto).</li>
</ol>
<p>If you class fulfills these three conditions, then it is fully supported by all serialization and deserialization
routines in reflect-cpp.</p>
<p>If you absolutely do not want to make any changes to your original class, you can implement a <a href="https://github.com/getml/reflect-cpp/blob/main/docs/custom_parser.md">custom parser</a>.</p>
<h2 id="using-an-impl-struct">Using an Impl struct<a class="headerlink" href="#using-an-impl-struct" title="Permanent link">&para;</a></h2>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">PersonImpl</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Rename</span><span class="o">&lt;</span><span class="s">&quot;firstName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first_name</span><span class="p">;</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Rename</span><span class="o">&lt;</span><span class="s">&quot;lastName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">last_name</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="o">:</span>
<span class="w">      </span><span class="c1">// 1) Publicly define `ReflectionType`</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="n">ReflectionType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PersonImpl</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// 2) Constructor that accepts your `ReflectionType`</span>
<span class="w">      </span><span class="n">Person</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">PersonImpl</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_impl</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">impl</span><span class="p">(</span><span class="n">_impl</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">      </span><span class="o">~</span><span class="n">Person</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// 3) Method called `reflection` that returns `ReflectionType`</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="n">ReflectionType</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">reflection</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">impl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">      </span><span class="c1">// ...add some more methods here...</span>

<span class="w">    </span><span class="k">private</span><span class="o">:</span>
<span class="w">        </span><span class="n">PersonImpl</span><span class="w"> </span><span class="n">impl</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="matching-variables-the-safe-way">Matching variables, the safe way<a class="headerlink" href="#matching-variables-the-safe-way" title="Permanent link">&para;</a></h2>
<p><code>rfl::Field</code> is designed in a way that you have to explicitly initialize
every the field (using <code>rfl::default_value</code>, if necessary), otherwise
you will get a compile-time error. </p>
<p>A frequent error that happens during serialization/deserialization is that programmers
add a field to their class (<code>Person</code> in this example), but forget to update
their serialization routine.</p>
<p>The example as shown below will protect you from any such errors, as all 
fields will have to be explicitly initialized, otherwise you will get a 
compile-time error. If you add a new field to <code>Person</code> you will have to
add it to <code>PersonImpl</code> as well and then explicitly initialize it in the 
constructor.</p>
<p>Don't worry <code>operator()</code> in <code>rfl::Field</code> is inlined. There won't be any 
runtime overhead.</p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">PersonImpl</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Field</span><span class="o">&lt;</span><span class="s">&quot;firstName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first_name</span><span class="p">;</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Field</span><span class="o">&lt;</span><span class="s">&quot;lastName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">last_name</span><span class="p">;</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Field</span><span class="o">&lt;</span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="o">:</span>
<span class="w">      </span><span class="c1">// 1) Publicly define `ReflectionType`</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="n">ReflectionType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PersonImpl</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// 2) Constructor that accepts your `ReflectionType`</span>
<span class="w">      </span><span class="c1">// This as the additional benefit that not only the types,</span>
<span class="w">      </span><span class="c1">// but also the names of the fields will be checked at compile time.</span>
<span class="w">      </span><span class="n">Person</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">PersonImpl</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_impl</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">first_name</span><span class="p">(</span><span class="n">_impl</span><span class="p">.</span><span class="n">first_name</span><span class="p">),</span>
<span class="w">          </span><span class="n">last_name</span><span class="p">(</span><span class="n">_impl</span><span class="p">.</span><span class="n">last_name</span><span class="p">),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="n">_impl</span><span class="p">.</span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">      </span><span class="o">~</span><span class="n">Person</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// 3) Method called `reflection` that returns `ReflectionType`</span>
<span class="w">      </span><span class="n">ReflectionType</span><span class="w"> </span><span class="nf">reflection</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="n">PersonImpl</span><span class="p">{</span>
<span class="w">            </span><span class="p">.</span><span class="n">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first_name</span><span class="p">,</span>
<span class="w">            </span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span>
<span class="w">            </span><span class="p">.</span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">};</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="c1">// ...add some more methods here...</span>

<span class="w">    </span><span class="k">private</span><span class="o">:</span>
<span class="w">      </span><span class="n">rfl</span><span class="o">::</span><span class="n">Field</span><span class="o">&lt;</span><span class="s">&quot;firstName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first_name</span><span class="p">;</span>
<span class="w">      </span><span class="n">rfl</span><span class="o">::</span><span class="n">Field</span><span class="o">&lt;</span><span class="s">&quot;lastName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">last_name</span><span class="p">;</span>
<span class="w">      </span><span class="n">rfl</span><span class="o">::</span><span class="n">Field</span><span class="o">&lt;</span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="matching-variables-the-unsafe-way">Matching variables, the unsafe way<a class="headerlink" href="#matching-variables-the-unsafe-way" title="Permanent link">&para;</a></h2>
<p>If, for any reason, you absolutely cannot change the fields
of your class, you have to make sure that all classes are properly
initialized or face runtime errors.</p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">PersonImpl</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ... same as in Example 1 or 2</span>
<span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1) Publicly define `ReflectionType`</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">ReflectionType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PersonImpl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 2) Constructor that accepts your `ReflectionType`</span>
<span class="w">    </span><span class="n">Person</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">PersonImpl</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_impl</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">first_name</span><span class="p">(</span><span class="n">_impl</span><span class="p">.</span><span class="n">first_name</span><span class="p">()),</span>
<span class="w">        </span><span class="n">last_name</span><span class="p">(</span><span class="n">_impl</span><span class="p">.</span><span class="n">last_name</span><span class="p">()),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="n">_impl</span><span class="p">.</span><span class="n">age</span><span class="p">())</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="c1">// ... same as in Example 2</span>

<span class="w">    </span><span class="k">private</span><span class="o">:</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">first_name</span><span class="p">;</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">last_name</span><span class="p">;</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="custom-parsers">Custom parsers<a class="headerlink" href="#custom-parsers" title="Permanent link">&para;</a></h2>
<p>If you absolutely do not want to make any changes to your original classes whatsoever,
you can implement a custom parser using <code>rfl::parsing::CustomParser</code>.</p>
<p>In order to do so, you must do the following:</p>
<p>You must create a helper struct that <em>can</em> be parsed. The helper struct must fulfill the following
conditions:</p>
<ol>
<li>
<p>It must contain a static method called <code>from_class</code> that takes your original class as an input and returns the helper struct. This method must not throw an exception.</p>
</li>
<li>
<p>(Optional) It must contain a method called <code>to_class</code> that transforms the helper struct into your original class. This method may throw an exception, if you want to. If you can directly construct your custom class from the field values in the order they were declared in the helper struct, you do not have to write a <code>to_class</code> method.</p>
</li>
</ol>
<p>You can then implement a custom parser for your class like this:</p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">namespace</span><span class="w"> </span><span class="nn">rfl</span><span class="o">::</span><span class="nn">parsing</span><span class="w"> </span><span class="p">{</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">ReaderType</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">WriterType</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ProcessorsType</span><span class="o">&gt;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Parser</span><span class="o">&lt;</span><span class="n">ReaderType</span><span class="p">,</span><span class="w"> </span><span class="n">WriterType</span><span class="p">,</span><span class="w"> </span><span class="n">YourOriginalClass</span><span class="p">,</span><span class="w"> </span><span class="n">ProcessorsType</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">CustomParser</span><span class="o">&lt;</span><span class="n">ReaderType</span><span class="p">,</span><span class="w"> </span><span class="n">WriterType</span><span class="p">,</span><span class="w"> </span><span class="n">ProcessorsType</span><span class="p">,</span><span class="w"> </span><span class="n">YourOriginalClass</span><span class="p">,</span>
<span class="w">                          </span><span class="n">YourHelperStruct</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>

<span class="p">}</span><span class="w">  </span><span class="c1">// namespace rfl::parsing</span>
</code></pre></div>
<p><strong>Example</strong></p>
<p>Suppose your original class looks like this:</p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Person</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_first_name</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_last_name</span><span class="p">,</span>
<span class="w">           </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_age</span><span class="p">)</span>
<span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">first_name_</span><span class="p">(</span><span class="n">_first_name</span><span class="p">),</span><span class="w"> </span><span class="n">last_name_</span><span class="p">(</span><span class="n">_last_name</span><span class="p">),</span><span class="w"> </span><span class="n">age_</span><span class="p">(</span><span class="n">_age</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">first_name</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">first_name_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">last_name</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">last_name_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">age</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">age_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">   </span><span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">first_name_</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">last_name_</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">age_</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>You can then write a helper struct: </p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">PersonImpl</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Rename</span><span class="o">&lt;</span><span class="s">&quot;firstName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first_name</span><span class="p">;</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Rename</span><span class="o">&lt;</span><span class="s">&quot;lastName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">last_name</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 1) Static method that takes your original class as an input and</span>
<span class="w">    </span><span class="c1">//    returns the helper struct.</span>
<span class="w">    </span><span class="c1">//    MUST NOT THROW AN EXCEPTION!</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">PersonImpl</span><span class="w"> </span><span class="nf">from_class</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Person</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_p</span><span class="p">)</span><span class="w"> </span><span class="k">noexcept</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">PersonImpl</span><span class="p">{.</span><span class="n">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_p</span><span class="p">.</span><span class="n">first_name</span><span class="p">(),</span>
<span class="w">                          </span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_p</span><span class="p">.</span><span class="n">last_name</span><span class="p">(),</span>
<span class="w">                          </span><span class="p">.</span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_p</span><span class="p">.</span><span class="n">age</span><span class="p">()};</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 2) Const method called `to_class` that transforms the helper struct</span>
<span class="w">    </span><span class="c1">//    into your original class.</span>
<span class="w">    </span><span class="c1">//    In this case, the `to_class` method is actually optional, because</span>
<span class="w">    </span><span class="c1">//    you can directly create Person from the field values.</span>
<span class="w">    </span><span class="n">Person</span><span class="w"> </span><span class="nf">to_class</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Person</span><span class="p">(</span><span class="n">first_name</span><span class="p">(),</span><span class="w"> </span><span class="n">last_name</span><span class="p">(),</span><span class="w"> </span><span class="n">age</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>You then implement the custom parser:</p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">namespace</span><span class="w"> </span><span class="nn">rfl</span><span class="o">::</span><span class="nn">parsing</span><span class="w"> </span><span class="p">{</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">ReaderType</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">WriterType</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ProcessorsType</span><span class="o">&gt;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Parser</span><span class="o">&lt;</span><span class="n">ReaderType</span><span class="p">,</span><span class="w"> </span><span class="n">WriterType</span><span class="p">,</span><span class="w"> </span><span class="n">Person</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">CustomParser</span><span class="o">&lt;</span><span class="n">ReaderType</span><span class="p">,</span><span class="w"> </span><span class="n">WriterType</span><span class="p">,</span><span class="w"> </span><span class="n">ProcessorsType</span><span class="p">,</span><span class="w"> </span><span class="n">Person</span><span class="p">,</span><span class="w"> </span><span class="n">PersonImpl</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{};</span>

<span class="p">}</span><span class="w">  </span><span class="c1">// namespace rfl::parsing</span>
</code></pre></div>
<p>Now your custom class is fully supported by reflect-cpp. So for instance, you could parse it
inside a vector:</p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">people</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rfl</span><span class="o">::</span><span class="n">json</span><span class="o">::</span><span class="n">read</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">json_str</span><span class="p">).</span><span class="n">value</span><span class="p">();</span>
</code></pre></div>
<p>As we have noted, in this particular example, the <code>Person</code> class can be constructed from the field values in
<code>PersonImpl</code> in the exact same order they were declared in <code>PersonImpl</code>. So we can drop the <code>.to_class</code> method:</p>
<div class="language-cpp highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">PersonImpl</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Rename</span><span class="o">&lt;</span><span class="s">&quot;firstName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first_name</span><span class="p">;</span>
<span class="w">    </span><span class="n">rfl</span><span class="o">::</span><span class="n">Rename</span><span class="o">&lt;</span><span class="s">&quot;lastName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">last_name</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>

<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">PersonImpl</span><span class="w"> </span><span class="nf">from_class</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Person</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_p</span><span class="p">)</span><span class="w"> </span><span class="k">noexcept</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">PersonImpl</span><span class="p">{.</span><span class="n">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_p</span><span class="p">.</span><span class="n">first_name</span><span class="p">(),</span>
<span class="w">                          </span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_p</span><span class="p">.</span><span class="n">last_name</span><span class="p">(),</span>
<span class="w">                          </span><span class="p">.</span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_p</span><span class="p">.</span><span class="n">age</span><span class="p">()};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "announce.dismiss", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.c7c1ca2c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "patrick"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c5b6415.min.js"></script>
      
    
  </body>
</html>